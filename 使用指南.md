# 🚀 拔罐小游戏关卡编辑器 - 快速使用指南

## ⚡ 5分钟快速上手

### 1️⃣ 启动编辑器
1. 打开Unity编辑器
2. 点击菜单栏 `Tools/Level Editor/一键配置`
3. 等待自动配置完成

### 2️⃣ 基本操作

#### 📝 添加内容
- **添加层级**：左侧面板 → "添加层级"按钮
- **添加形状**：工具栏 → "添加形状"按钮
  - 新形状会继承当前选中形状的类型
  - 如果没有选中形状，默认为圆形
- **添加球体**：选中形状 → 工具栏 → "添加球"按钮
  - 必须先选中一个形状才能添加球
  - 球会创建在选中的形状内部

#### 🎮 编辑操作
- **移动形状**：直接拖拽形状
- **移动球体**：拖拽球体（限制在形状内）
- **旋转形状**：选中形状 → 右侧面板 → "旋转"滑块
- **切换形状类型**：选中形状 → 右侧面板 → 点击对应类型按钮
- **编辑属性**：选中对象 → 右侧面板修改属性

#### 📊 导出数据
- 点击右侧面板 → "导出JSON"按钮
- 数据自动复制到剪贴板
- 在Console窗口查看完整数据

## 🎯 界面说明

### 左侧面板 - 层级管理
```
┌─────────────────┐
│ 层级列表        │
│ ├ 默认层级      │
│ ├ 层级2         │
│ └ 层级3         │
│                 │
│ [添加层级]      │
│ [删除层级]      │
└─────────────────┘
```

### 中间区域 - 编辑区
```
┌─────────────────────────────────┐
│ [添加形状] [添加球]             │ ← 工具栏
├─────────────────────────────────┤
│                                 │
│        ⭕ 形状1                 │
│         ● 球体                  │
│                                 │
│     ⬜ 形状2                    │
│                                 │
└─────────────────────────────────┘
```

### 右侧面板 - 属性编辑
```
┌─────────────────┐
│ 属性面板        │
│                 │
│ 名称: [输入框]  │
│ X位置: [滑块]   │
│ Y位置: [滑块]   │
│ 旋转: [滑块]    │
│ 形状类型:       │
│ [圆形]          │
│ [矩形]          │
│ [三角形]        │
│ [菱形]          │
│                 │
│ [导出JSON]      │
└─────────────────┘
```

## 🎨 形状类型

| 形状 | 说明 | 特点 |
|------|------|------|
| ⭕ 圆形 | 基础圆形 | 适合放置球体 |
| ⬜ 矩形 | 方形 | 稳定支撑 |
| 🔺 三角形 | 三角形 | 动态布局 |
| 💎 菱形 | 菱形 | 装饰性 |

## 📋 操作技巧

### 💡 高效编辑
1. **批量操作**：先添加多个形状，再逐个编辑
2. **精确定位**：使用右侧滑块精确调整位置
3. **快速切换**：点击层级名称快速切换编辑层级

### 🎯 形状类型切换
1. **选中形状**：点击形状使其高亮显示（黄色）
2. **选择类型**：点击右侧形状类型按钮（圆形/矩形/三角形/菱形）
3. **立即生效**：形状会立即变成选中的类型

### 🎯 最佳实践
1. **层级规划**：使用不同层级组织关卡元素
2. **命名规范**：给形状和球体起有意义的名字
3. **数据备份**：定期导出JSON数据作为备份

## 🐛 常见问题

### ❓ 问题：UI没有显示
**解决**：检查Console窗口错误信息，重新运行一键配置

### ❓ 问题：拖拽不响应
**解决**：确保EventSystem存在，检查GraphicRaycaster

### ❓ 问题：球体无法拖拽
**解决**：球体只能在所属形状内移动，这是正常限制

### ❓ 问题：导出失败
**解决**：检查Console窗口，确保关卡数据正确初始化

### ❓ 问题：形状类型无法切换
**解决**：
1. 确保先点击选中形状（形状会变成黄色高亮）
2. 然后点击右侧的形状类型按钮
3. 查看Console窗口的调试信息

## 📊 数据格式示例

```json
{
  "levelName": "我的关卡",
  "layers": [
    {
      "layerName": "主层级",
      "shapes": [
        {
          "shapeType": "圆形",
          "position": {"x": 100, "y": 50},
          "rotation": 45.0,
          "balls": [
            {
              "ballType": "红球",
              "position": {"x": 10, "y": 5}
            }
          ]
        }
      ]
    }
  ]
}
```

## 🔧 高级功能

### 自定义扩展
- 修改`ShapeController.cs`添加新形状类型
- 修改`BallController.cs`添加新球体样式
- 编辑`LevelEditorUIBuilder.cs`调整UI布局

### 脚本API
```csharp
// 获取当前关卡数据
LevelData level = levelEditor.currentLevel;

// 添加新形状
ShapeData newShape = new ShapeData("圆形", Vector2.zero, 0f);
levelEditor.currentLayer.shapes.Add(newShape);

// 导出JSON
string json = LevelDataExporter.SaveToJson(level);
```

---

**🎉 现在你可以开始创建精彩的关卡了！**

如有问题，请查看完整文档或提交Issue。 